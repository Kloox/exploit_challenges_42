#include <stdbool.h>
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>


struct msg_wrapper {
   char    message[140];
   char    username[40];
   int     message_len;
}


void secret_backdoor(void) {
    char input[128];

    fgets(input, 128, stdin);
    system(input);
    return;
}


void set_msg(struct message_wrapper *wrapper) {
    char  buffer[1024];

    puts(">: Msg @Unix-Dude");
    printf(">>: ");

    fgets(buffer, 1024, stdin);
    strncpy(wrapper->message, buffer, wrapper->message_len);
    return ;
}


void set_username(struct message_wrapper *wrapper) {
    char username[128]; 
    int i = 0;
    
    puts(">: Enter your username");
    printf(">>: ");
    
    fgets(username, 128, stdin);

    while(i <= 40 && buffer[i]) {
	wrapper->username[i] = username[i];
	i++;
    }

    printf(">: Welcome, %s", wrapper->username);
    return;
}

int64_t handle_msg(void) {
    struct message_wrapper *wrapper;
    
    wrapper->message_len = 140;

    set_username(wrapper);
    set_msg(wrapper);

    return puts(">: Msg sent!");
}


int main(int argc, char ** argv) {

    puts("--------------------------------------------\n\
          |   ~Welcome to l33t-m$n ~    v1337        |\n\
          --------------------------------------------");
    handle_msg();
    return 0;
}

